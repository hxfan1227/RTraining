<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Basics • RTraining</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="R Basics">
<meta property="og:description" content="RTraining">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RTraining</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/About_R.html">About R</a>
    </li>
    <li>
      <a href="../articles/Data_Manipulation.html">Data Manipulation</a>
    </li>
    <li>
      <a href="../articles/Data_Transformation.html">Data Transformation</a>
    </li>
    <li>
      <a href="../articles/R%20_Programming.html">R Programming</a>
    </li>
    <li>
      <a href="../articles/R_Basics.html">R Basics</a>
    </li>
    <li>
      <a href="../articles/R_ggplot2.html">ggplot2</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="R_Basics_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="R_Basics_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="R_Basics_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>R Basics</h1>
            
      
      
      <div class="hidden name"><code>R_Basics.Rmd</code></div>

    </div>

    
    
<div id="基本操作" class="section level1">
<h1 class="hasAnchor">
<a href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" class="anchor"></a>基本操作</h1>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://github.com/hadley/nycflights13">nycflights13</a></span><span class="op">)</span></pre></div>
<div id="r语言基本操作" class="section level2">
<h2 class="hasAnchor">
<a href="#r%E8%AF%AD%E8%A8%80%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" class="anchor"></a>R语言基本操作</h2>
<p>你可以像使用计算器一样使用R：</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="fl">1</span> <span class="op">/</span> <span class="fl">200</span> <span class="op">*</span> <span class="fl">30</span>
<span class="co">#&gt; [1] 0.15</span>
<span class="op">(</span><span class="fl">59</span> <span class="op">+</span> <span class="fl">73</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">3</span>
<span class="co">#&gt; [1] 44.66667</span>
<span class="fl">2</span> <span class="op">^</span> <span class="fl">2</span>
<span class="co">#&gt; [1] 4</span>
<span class="fu"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span><span class="op">(</span><span class="va">pi</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; [1] 1</span></pre></div>
<p>你可以创建一个变量并使用<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>进行赋值</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="op">*</span> <span class="fl">4</span></pre></div>
<ul>
<li>赋值操作的基本形式均为<code>object_name &lt;- value</code>，<code><a href="https://rdrr.io/r/base/assignOps.html">&lt;-</a></code>在Rsudio中的快捷键是Alt + -</li>
<li>你当然可以使用<code><a href="https://rdrr.io/r/base/assignOps.html">=</a></code>进行赋值，但是<strong>强烈不建议</strong>
</li>
<li><strong>在Rstudio中使用Alt + Shift + K来显示所有可用的快捷键</strong></li>
</ul>
</div>
<div id="r语言变量命名" class="section level2">
<h2 class="hasAnchor">
<a href="#r%E8%AF%AD%E8%A8%80%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D" class="anchor"></a>R语言变量命名</h2>
<ul>
<li><p>R语言中的变量名称必须以字母开头，并且只能包含字母，数字，下划线<code>_</code>以及<code>.</code></p></li>
<li><p>为了让变量名更加有意义，往往需要多个单词，建议使用<code>_</code>进行分隔或者使用驼峰命名法</p></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">i_use_snake_case</span>
<span class="va">otherPeopleUseCamelCase</span>
<span class="va">some.people.use.periods</span>
<span class="va">And_aFew.People_RENOUNCEconvention</span></pre></div>
<ul>
<li>直接在R语言中输入变量名称来使用它</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">x</span>
<span class="co">#&gt; [1] 12</span></pre></div>
</div>
<div id="数学运算符和向量" class="section level2">
<h2 class="hasAnchor">
<a href="#%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E5%90%91%E9%87%8F" class="anchor"></a>数学运算符和向量</h2>
<ul>
<li>向量是数值的有序合集</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="va">a</span>
<span class="co">#&gt; [1] 1 2 3 4 5</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span><span class="op">:</span><span class="fl">9</span><span class="op">)</span>
<span class="va">b</span>
<span class="co">#&gt; [1] 5 6 7 8 9</span></pre></div>
<ul>
<li>如果我们要将两个向量相加并得到一个新的向量：</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">a</span> <span class="op">+</span> <span class="va">b</span>
<span class="co">#&gt; [1]  6  8 10 12 14</span></pre></div>
<blockquote>
<ul>
<li>R里面几乎所有的运算符的都支持<strong>向量化</strong>操作</li>
<li>如果两个向量长度不一样，会发生什么？ <code>c(1, 3, 6, 10, 15) + c(0, 1, 3, 6)</code>
</li>
</ul>
</blockquote>
</div>
<div id="向量化" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%90%91%E9%87%8F%E5%8C%96" class="anchor"></a>向量化</h2>
<p>在R语言中，向量化有几种含义：</p>
<ul>
<li>运算符或者函数能够作用于向量中的每一个元素</li>
<li>当函数接收一个向量作为输入时，可以计算汇总统计</li>
<li>参数向量化</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; [1] 15</span>
<span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; [1] 3</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; [1] 15</span>
<span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; [1] 1</span></pre></div>
</div>
<div id="复杂数学运算" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%A4%8D%E6%9D%82%E6%95%B0%E5%AD%A6%E8%BF%90%E7%AE%97" class="anchor"></a>复杂数学运算</h2>
<ul>
<li>使用<code><a href="https://rdrr.io/r/base/Syntax.html">?Syntax</a></code>来查看R语言支持的所有运算符</li>
<li>复杂计算：</li>
</ul>
<p><span class="math inline">\(\int_0^{\infty}\frac{1}{(x + 1)\sqrt{x}}dx\)</span></p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/stats/integrate.html">integrate</a></span><span class="op">(</span>f <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span><span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">}</span>, lower <span class="op">=</span> <span class="fl">0</span>, upper <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span>
<span class="co">#&gt; 3.141593 with absolute error &lt; 2.7e-05</span></pre></div>
</div>
<div id="特殊数字" class="section level2">
<h2 class="hasAnchor">
<a href="#%E7%89%B9%E6%AE%8A%E6%95%B0%E5%AD%97" class="anchor"></a>特殊数字</h2>
<p>R语言支持四种特殊值：<code>-Inf</code>(负无穷), <code>Inf</code>(正无穷), <code>NaN</code>(非数字, Not A Number), <code>NA</code> (缺失值, Not Available)</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">Inf</span> <span class="op">+</span> <span class="fl">1</span>, <span class="cn">Inf</span> <span class="op">-</span> <span class="fl">1</span>, <span class="cn">Inf</span> <span class="op">-</span> <span class="cn">Inf</span><span class="op">)</span>
<span class="co">#&gt; [1] Inf Inf NaN</span>
<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="cn">Inf</span>, <span class="cn">Inf</span> <span class="op">/</span> <span class="fl">1</span>, <span class="cn">Inf</span> <span class="op">/</span> <span class="cn">Inf</span><span class="op">)</span>
<span class="co">#&gt; [1]   0 Inf NaN</span>
<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="cn">Inf</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Trig.html">sin</a></span><span class="op">(</span><span class="cn">Inf</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Warning in sin(Inf): NaNs produced</span>
<span class="co">#&gt; [1] Inf NaN</span>
<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">NA</span> <span class="op">+</span> <span class="fl">1</span>, <span class="cn">NA</span> <span class="op">*</span> <span class="fl">5</span>, <span class="cn">NA</span> <span class="op">+</span> <span class="cn">Inf</span><span class="op">)</span>
<span class="co">#&gt; [1] NA NA NA</span></pre></div>
<p>同时，R语言也提供了4个函数来检查这些特殊值：</p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/is.finite.html">is.finite</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span>, <span class="cn">NA</span>, <span class="cn">NaN</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1]  TRUE FALSE FALSE FALSE</span>
<span class="fu"><a href="https://rdrr.io/r/base/is.finite.html">is.infinite</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span>, <span class="cn">NA</span>, <span class="cn">NaN</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] FALSE  TRUE FALSE FALSE</span>
<span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span>, <span class="cn">NA</span>, <span class="cn">NaN</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] FALSE FALSE  TRUE  TRUE</span>
<span class="fu"><a href="https://rdrr.io/r/base/is.finite.html">is.nan</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">Inf</span>, <span class="cn">NA</span>, <span class="cn">NaN</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] FALSE FALSE FALSE  TRUE</span></pre></div>
</div>
<div id="逻辑向量" class="section level2">
<h2 class="hasAnchor">
<a href="#%E9%80%BB%E8%BE%91%E5%90%91%E9%87%8F" class="anchor"></a>逻辑向量</h2>
<p>R里面有三种逻辑状态：<code>TRUE(T)</code>、<code>FALSE(F)</code>、<code>NA</code></p>
<p>同时R也提供了三个向量化的逻辑运算符：</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/Logic.html">!</a></code>：代表非操作</li>
<li>
<code><a href="https://rdrr.io/r/base/Logic.html">&amp;</a></code>：代表与操作</li>
<li>
<code><a href="https://rdrr.io/r/base/Logic.html">|</a></code>：代表或操作</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">T</span>, <span class="cn">F</span>, <span class="cn">NA</span><span class="op">)</span>
<span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">x</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/with.html">within</a></span><span class="op">(</span>
  <span class="va">xy</span>,
  <span class="op">{</span>
    <span class="va">and</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">&amp;</span> <span class="va">y</span>
    <span class="va">or</span> <span class="op">&lt;-</span> <span class="va">x</span> <span class="op">|</span> <span class="va">y</span>
    <span class="va">not.y</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="va">y</span>
    <span class="va">not.x</span> <span class="op">&lt;-</span> <span class="op">!</span><span class="va">x</span>
    <span class="op">}</span>
  <span class="op">)</span>
<span class="co">#&gt;       x     y not.x not.y    or   and</span>
<span class="co">#&gt; 1  TRUE  TRUE FALSE FALSE  TRUE  TRUE</span>
<span class="co">#&gt; 2 FALSE  TRUE  TRUE FALSE  TRUE FALSE</span>
<span class="co">#&gt; 3    NA  TRUE    NA FALSE  TRUE    NA</span>
<span class="co">#&gt; 4  TRUE FALSE FALSE  TRUE  TRUE FALSE</span>
<span class="co">#&gt; 5 FALSE FALSE  TRUE  TRUE FALSE FALSE</span>
<span class="co">#&gt; 6    NA FALSE    NA  TRUE    NA FALSE</span>
<span class="co">#&gt; 7  TRUE    NA FALSE    NA  TRUE    NA</span>
<span class="co">#&gt; 8 FALSE    NA  TRUE    NA    NA FALSE</span>
<span class="co">#&gt; 9    NA    NA    NA    NA    NA    NA</span></pre></div>
<blockquote>
<ul>
<li>R里面还有另外两个类似的操作符，<code><a href="https://rdrr.io/r/base/Logic.html">||</a></code>和<code><a href="https://rdrr.io/r/base/Logic.html">&amp;&amp;</a></code>，请自行查阅帮助。</li>
</ul>
</blockquote>
</div>
<div id="数值判断" class="section level2">
<h2 class="hasAnchor">
<a href="#%E6%95%B0%E5%80%BC%E5%88%A4%E6%96%AD" class="anchor"></a>数值判断</h2>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="co"># Compare numbers (==, &gt;=, !=, &lt;=, &lt;, &gt;)</span>
<span class="co"># ?comprison</span>
<span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span> <span class="op">==</span> <span class="fl">2</span> <span class="co"># T or F?</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">^</span> <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span> <span class="co"># if TRUE, it will return TRUE</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co"># all.equal(sqrt(2), 3) # if FALSE, it will report the difference.</span>
<span class="fu"><a href="https://rdrr.io/r/base/Logic.html">isTRUE</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] FALSE</span></pre></div>
<p><strong>比较数字是否相同，不要使用==，使用all.equal函数</strong>。</p>
</div>
</div>
<div id="r语言数据类型" class="section level1">
<h1 class="hasAnchor">
<a href="#r%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" class="anchor"></a>R语言数据类型</h1>
<div id="数据类型种类" class="section level2">
<h2 class="hasAnchor">
<a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%A7%8D%E7%B1%BB" class="anchor"></a>数据类型种类</h2>
<p>R中所有的变量都有一个类，表明此变量属于什么类型。 在R中，最小的数据类型是原子向量（Atomic）</p>
<pre><code>#&gt;  [1] "array"           "atomic"          "call"            "character"      
#&gt;  [5] "complex"         "Coord"           "data"            "Date"           
#&gt;  [9] "difftime"        "double"          "duration"        "element"        
#&gt; [13] "empty"           "environment"     "expression"      "facet"          
#&gt; [17] "factor"          "finite"          "function"        "ggplot"         
#&gt; [21] "ggproto"         "grouped_df"      "infinite"        "instant"        
#&gt; [25] "integer"         "interval"        "language"        "leaf"           
#&gt; [29] "list"            "loaded"          "logical"         "matrix"         
#&gt; [33] "mts"             "na"              "name"            "nan"            
#&gt; [37] "null"            "numeric"         "numeric_version" "object"         
#&gt; [41] "ordered"         "package_version" "pairlist"        "period"         
#&gt; [45] "POSIXct"         "POSIXlt"         "POSIXt"          "primitive"      
#&gt; [49] "qr"              "R"               "raster"          "raw"            
#&gt; [53] "recursive"       "relistable"      "single"          "src"            
#&gt; [57] "stepfun"         "symbol"          "table"           "tbl"            
#&gt; [61] "theme"           "tibble"          "timepoint"       "timespan"       
#&gt; [65] "ts"              "tskernel"        "unsorted"        "vector"</code></pre>
</div>
<div id="数据类型判断" class="section level2">
<h2 class="hasAnchor">
<a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD" class="anchor"></a>数据类型判断</h2>
<p>R里面也提供了大量的函数来判断数据类型。</p>
<pre><code>#&gt;  [1] "is.array"                "is.atomic"              
#&gt;  [3] "is.call"                 "is.character"           
#&gt;  [5] "is.complex"              "is.Coord"               
#&gt;  [7] "is.data.frame"           "is.Date"                
#&gt;  [9] "is.difftime"             "is.double"              
#&gt; [11] "is.duration"             "is.element"             
#&gt; [13] "is.empty.model"          "is.environment"         
#&gt; [15] "is.expression"           "is.facet"               
#&gt; [17] "is.factor"               "is.finite"              
#&gt; [19] "is.function"             "is.ggplot"              
#&gt; [21] "is.ggproto"              "is.grouped_df"          
#&gt; [23] "is.infinite"             "is.instant"             
#&gt; [25] "is.integer"              "is.interval"            
#&gt; [27] "is.language"             "is.leaf"                
#&gt; [29] "is.list"                 "is.loaded"              
#&gt; [31] "is.logical"              "is.matrix"              
#&gt; [33] "is.mts"                  "is.na"                  
#&gt; [35] "is.na.data.frame"        "is.na.numeric_version"  
#&gt; [37] "is.na.POSIXlt"           "is.na&lt;-"                
#&gt; [39] "is.na&lt;-.default"         "is.na&lt;-.factor"         
#&gt; [41] "is.na&lt;-.numeric_version" "is.name"                
#&gt; [43] "is.nan"                  "is.null"                
#&gt; [45] "is.numeric"              "is.numeric.Date"        
#&gt; [47] "is.numeric.difftime"     "is.numeric.POSIXt"      
#&gt; [49] "is.numeric_version"      "is.object"</code></pre>
</div>
<div id="类型转换" class="section level2">
<h2 class="hasAnchor">
<a href="#%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2" class="anchor"></a>类型转换</h2>
<p>R里面提供了很多的函数来进行数据类型的转换。</p>
<pre><code>#&gt;  [1] "as.array"                      "as.array.default"             
#&gt;  [3] "as.call"                       "as.character"                 
#&gt;  [5] "as.character.condition"        "as.character.Date"            
#&gt;  [7] "as.character.default"          "as.character.error"           
#&gt;  [9] "as.character.factor"           "as.character.hexmode"         
#&gt; [11] "as.character.numeric_version"  "as.character.octmode"         
#&gt; [13] "as.character.POSIXt"           "as.character.srcref"          
#&gt; [15] "as.col_spec"                   "as.complex"                   
#&gt; [17] "as.data.frame"                 "as.data.frame.array"          
#&gt; [19] "as.data.frame.AsIs"            "as.data.frame.character"      
#&gt; [21] "as.data.frame.complex"         "as.data.frame.data.frame"     
#&gt; [23] "as.data.frame.Date"            "as.data.frame.default"        
#&gt; [25] "as.data.frame.difftime"        "as.data.frame.factor"         
#&gt; [27] "as.data.frame.integer"         "as.data.frame.list"           
#&gt; [29] "as.data.frame.logical"         "as.data.frame.matrix"         
#&gt; [31] "as.data.frame.model.matrix"    "as.data.frame.noquote"        
#&gt; [33] "as.data.frame.numeric"         "as.data.frame.numeric_version"
#&gt; [35] "as.data.frame.ordered"         "as.data.frame.POSIXct"        
#&gt; [37] "as.data.frame.POSIXlt"         "as.data.frame.raw"            
#&gt; [39] "as.data.frame.table"           "as.data.frame.ts"             
#&gt; [41] "as.data.frame.vector"          "as.Date"                      
#&gt; [43] "as.Date.character"             "as.Date.default"              
#&gt; [45] "as.Date.factor"                "as.Date.numeric"              
#&gt; [47] "as.Date.POSIXct"               "as.Date.POSIXlt"              
#&gt; [49] "as.dendrogram"                 "as.difftime"</code></pre>
</div>
</div>
<div id="几种重要的数据类型" class="section level1">
<h1 class="hasAnchor">
<a href="#%E5%87%A0%E7%A7%8D%E9%87%8D%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" class="anchor"></a>几种重要的数据类型</h1>
<div id="数值" class="section level2">
<h2 class="hasAnchor">
<a href="#%E6%95%B0%E5%80%BC" class="anchor"></a>数值</h2>
<p>R里面所有的变量都有一个类，一般来说可以使用<code><a href="https://rdrr.io/r/base/class.html">class()</a></code>来获取某一对象的类型。</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span>
<span class="co">#&gt; [1] "integer"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fl">1.5</span><span class="op">)</span>
<span class="co">#&gt; [1] "numeric"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fl">3i</span><span class="op">)</span>
<span class="co">#&gt; [1] "complex"</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">&gt;</span> <span class="fl">2</span><span class="op">)</span>
<span class="co">#&gt; [1] "logical"</span></pre></div>
</div>
<div id="字符和因子" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%AD%97%E7%AC%A6%E5%92%8C%E5%9B%A0%E5%AD%90" class="anchor"></a>字符和因子</h2>
<ul>
<li>字符</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'male'</span>, <span class="st">'female'</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "character"</span></pre></div>
<ul>
<li>因子</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="va">gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'male'</span>, <span class="st">'female'</span><span class="op">)</span><span class="op">)</span>
<span class="va">gender</span>
<span class="co">#&gt; [1] male   female</span>
<span class="co">#&gt; Levels: female male</span></pre></div>
<p>因子和字符的唯一区别是因子有水平(<code>level</code>)属性。因子会按照水平进行排序。 可以使用<code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>调整因子的水平。</p>
<blockquote>
<ul>
<li>有一个数值型的因子，如何将它转为数值？ <code>a &lt;- factor(c(1, 11, 20, 30))</code>
</li>
<li>提示：<code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>可以将字符转换成数字。</li>
</ul>
</blockquote>
</div>
</div>
<div id="r语言数据结构" class="section level1">
<h1 class="hasAnchor">
<a href="#r%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" class="anchor"></a>R语言数据结构</h1>
<div id="数据结构分类" class="section level2">
<h2 class="hasAnchor">
<a href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%88%86%E7%B1%BB" class="anchor"></a>数据结构分类</h2>
<p>R语言有5种基本的数据结构，分别是：向量（vector）、矩阵（matrix）、 数组（array）、列表（list）和数据框（data.frame）</p>
<div class="sourceCode" id="cb20"><pre class="downlit">
<span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/include_graphics.html">include_graphics</a></span><span class="op">(</span><span class="st">'./Figures/data_type.jpg'</span><span class="op">)</span></pre></div>
<div class="figure" style="text-align: center">
<img src="Figures/data_type.jpg" alt="数据类型" width="70%"><p class="caption">
数据类型
</p>
</div>
</div>
</div>
<div id="向量" class="section level1">
<h1 class="hasAnchor">
<a href="#%E5%90%91%E9%87%8F" class="anchor"></a>向量</h1>
<div id="向量的定义" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%90%91%E9%87%8F%E7%9A%84%E5%AE%9A%E4%B9%89" class="anchor"></a>向量的定义</h2>
<ul>
<li>原子向量是用于存储数值型、字符型或逻辑型数据的<strong>一维数组</strong>。</li>
<li>通常使用<code><a href="https://rdrr.io/r/base/c.html">c()</a></code>来构建原子向量，<code><a href="https://rdrr.io/r/base/c.html">c()</a></code>是combine的简写。</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">3</span>, <span class="fl">6</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span>  <span class="co"># numeric vector </span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span><span class="op">)</span> <span class="co"># character vector</span>
<span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span>      <span class="co"># logical vector </span></pre></div>
<ul>
<li><strong>原子向量中的数据必须是相同的类型(数值型、字符型或逻辑型)。</strong></li>
</ul>
</div>
<div id="向量强制转换" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%90%91%E9%87%8F%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2" class="anchor"></a>向量强制转换</h2>
<ul>
<li>当把不同类型的数据结合成一个向量时，它们会被强制转换（coerce）成灵活的类型</li>
<li>数据类型灵活性由低到高的排序为：<code>logical</code> &lt; <code>integer</code> &lt; <code>double</code> &lt; <code>character</code>
</li>
<li>逻辑性变量强制转换时，<code>TRUE</code>变成<code>1</code>，<code>FALSE</code>变成<code>0</code>。配合<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>和<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>使用</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">F</span>, <span class="cn">F</span>, <span class="cn">T</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Total number of TRUEs</span>
<span class="co">#&gt; [1] 1</span>
<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># Propotion that are TURE</span>
<span class="co">#&gt; [1] 0.3333333</span></pre></div>
</div>
<div id="创建重复的向量" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%88%9B%E5%BB%BA%E9%87%8D%E5%A4%8D%E7%9A%84%E5%90%91%E9%87%8F" class="anchor"></a>创建重复的向量</h2>
<div class="sourceCode" id="cb23"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span> <span class="co"># rep(2:5, times = 2)</span>
<span class="co">#&gt; [1] 2 3 4 5 2 3 4 5</span>
<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, times <span class="op">=</span> <span class="fl">4</span>, each <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> 
<span class="co">#&gt;  [1] 1 1 2 2 3 3 1 1 2 2 3 3 1 1 2 2 3 3 1 1 2 2 3 3</span>
<span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">'x'</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, sep <span class="op">=</span> <span class="st">'_'</span><span class="op">)</span>
<span class="co">#&gt; [1] "x_1" "x_2" "x_3" "x_4" "x_5"</span></pre></div>
</div>
<div id="向量的基本操作" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%90%91%E9%87%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" class="anchor"></a>向量的基本操作</h2>
<div class="sourceCode" id="cb24"><pre class="downlit">
<span class="va">a</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>
<span class="va">a</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span><span class="op">]</span> <span class="co"># 1st, 3rd and 5th elements in a</span>
<span class="co">#&gt; [1] 1 3 5</span>
<span class="va">a</span><span class="op">[</span><span class="va">a</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">]</span> <span class="co"># list all the elements larger than 3 in a</span>
<span class="co">#&gt; [1]  4  5  6  7  8  9 10</span>
<span class="va">a</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">]</span> <span class="co"># eliminate the first 3 elements in a</span>
<span class="co">#&gt; [1]  4  5  6  7  8  9 10</span>
<span class="va">a</span> <span class="op">*</span> <span class="va">a</span> <span class="co"># element-wise manipulation </span>
<span class="co">#&gt;  [1]   1   4   9  16  25  36  49  64  81 100</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span> <span class="co"># the length of the vector</span>
<span class="co">#&gt; [1] 10</span>
<span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>apple <span class="op">=</span> <span class="fl">1</span>, banana <span class="op">=</span> <span class="fl">2</span>, <span class="st">'kiwi fruit'</span> <span class="op">=</span> <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>
<span class="va">b</span>
<span class="co">#&gt;      apple     banana kiwi fruit            </span>
<span class="co">#&gt;          1          2          3          4</span></pre></div>
</div>
</div>
<div id="矩阵matrix" class="section level1">
<h1 class="hasAnchor">
<a href="#%E7%9F%A9%E9%98%B5matrix" class="anchor"></a>矩阵（matrix）</h1>
<div id="矩阵的定义" class="section level2">
<h2 class="hasAnchor">
<a href="#%E7%9F%A9%E9%98%B5%E7%9A%84%E5%AE%9A%E4%B9%89" class="anchor"></a>矩阵的定义</h2>
<p>矩阵是一个<strong>二维数组</strong>。</p>
<div class="sourceCode" id="cb25"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="co"># a 2 by 2 matrix</span>
<span class="co">#&gt;      [,1] [,2]</span>
<span class="co">#&gt; [1,]    1    3</span>
<span class="co">#&gt; [2,]    2    4</span>
<span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="co"># filled by rows</span>
<span class="co">#&gt;      [,1] [,2]</span>
<span class="co">#&gt; [1,]    1    2</span>
<span class="co">#&gt; [2,]    3    4</span></pre></div>
</div>
<div id="矩阵基本操作" class="section level2">
<h2 class="hasAnchor">
<a href="#%E7%9F%A9%E9%98%B5%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" class="anchor"></a>矩阵基本操作</h2>
<div class="sourceCode" id="cb26"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span> 
<span class="va">x</span><span class="op">[</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">]</span> <span class="co"># element at 2nd row and 2nd column</span>
<span class="co">#&gt; [1] 4</span>
<span class="va">x</span><span class="op">[</span><span class="fl">2</span>, <span class="op">]</span>  <span class="co"># all elements in 2nd row </span>
<span class="co">#&gt; [1] 2 4 6</span>
<span class="va">x</span><span class="op">[</span> ,<span class="fl">2</span><span class="op">]</span>  <span class="co"># all elements in 2nd column  </span>
<span class="co">#&gt; [1] 3 4</span>
<span class="va">x</span><span class="op">[</span><span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">]</span>  <span class="co"># elements at 2nd and 3rd column in 2nd row </span>
<span class="co">#&gt; [1] 4 6</span></pre></div>
</div>
</div>
<div id="列表" class="section level1">
<h1 class="hasAnchor">
<a href="#%E5%88%97%E8%A1%A8" class="anchor"></a>列表</h1>
<div id="通用列表list" class="section level2">
<h2 class="hasAnchor">
<a href="#%E9%80%9A%E7%94%A8%E5%88%97%E8%A1%A8list" class="anchor"></a>通用列表（list）</h2>
<ul>
<li>R数据类型中最为复杂的一种数据结构。</li>
<li>列表就是包含<strong>任何</strong>类型的对象，可以是若干向量、矩阵、数据框，甚至其他列表的组合。</li>
<li>可以通过<code><a href="https://rdrr.io/r/base/list.html">list()</a></code>来创建</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="downlit">
<span class="va">char_obj</span> <span class="op">&lt;-</span> <span class="st">"My First List"</span> 
<span class="va">vec_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">26</span>, <span class="fl">18</span>, <span class="fl">39</span><span class="op">)</span> 
<span class="va">mat_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, nrow <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> 
<span class="va">my_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="va">char_obj</span>, <span class="va">vec_obj</span>, <span class="va">mat_obj</span><span class="op">)</span>
<span class="va">my_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># first element in a list</span>
<span class="co">#&gt; [1] "My First List"</span></pre></div>
</div>
<div id="数据框data-framedata-table" class="section level2">
<h2 class="hasAnchor">
<a href="#%E6%95%B0%E6%8D%AE%E6%A1%86data-framedata-table" class="anchor"></a>数据框（data.frame/data.table）</h2>
<div class="sourceCode" id="cb28"><pre class="downlit">
<span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>patientID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,
                     age       <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">34</span>, <span class="fl">28</span>, <span class="fl">52</span><span class="op">)</span>, 
                     diabetes  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Type1"</span>, <span class="st">"Type2"</span>,<span class="st">"Type1"</span>,<span class="st">"Type1"</span><span class="op">)</span>,
                     status    <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Poor"</span>, <span class="st">"Improved"</span>, <span class="st">"Excellent"</span>, <span class="st">"Poor"</span><span class="op">)</span>
                     <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">mydata</span>, <span class="fl">3</span><span class="op">)</span>
<span class="co">#&gt;   patientID age diabetes    status</span>
<span class="co">#&gt; 1         1  25    Type1      Poor</span>
<span class="co">#&gt; 2         2  34    Type2  Improved</span>
<span class="co">#&gt; 3         3  28    Type1 Excellent</span></pre></div>
<p><strong>数据库里的不同列的数据长度须一致，相同列的数据类型须一致</strong></p>
<p>R语言原生的data.table处理规模较大的数据时速度较慢，可以用data.table代替。后续课程会详细介绍。</p>
</div>
</div>
<div id="在r语言中使用函数" class="section level1">
<h1 class="hasAnchor">
<a href="#%E5%9C%A8r%E8%AF%AD%E8%A8%80%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0" class="anchor"></a>在R语言中使用函数</h1>
<div id="函数调用" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8" class="anchor"></a>函数调用</h2>
<p>R语言中有大量的内置函数，同时也有大量的第三方程序包提供的函数，他们调用的方式都相同：</p>
<div class="sourceCode" id="cb29"><pre class="downlit">
<span class="fu">function_name</span><span class="op">(</span>arg1 <span class="op">=</span> <span class="va">val1</span>, arg2 <span class="op">=</span> <span class="va">val2</span>, <span class="va">...</span><span class="op">)</span></pre></div>
<p>我们尝试使用<code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code>来生成1到10的一个向量。</p>
<div class="sourceCode" id="cb30"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt;  [1]  1  2  3  4  5  6  7  8  9 10</span></pre></div>
</div>
<div id="循环和其他控制流程-control-flow" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%85%B6%E4%BB%96%E6%8E%A7%E5%88%B6%E6%B5%81%E7%A8%8B-control-flow" class="anchor"></a>循环和其他控制流程 （Control Flow）</h2>
<ul>
<li>语法</li>
</ul>
<p>使用<code><a href="https://rdrr.io/r/base/Control.html">?Control</a></code>来查看R支持的控制流程</p>
<div class="sourceCode" id="cb31"><pre class="downlit">
<span class="kw">for</span><span class="op">(</span><span class="va">var</span> <span class="kw">in</span> <span class="va">seq</span><span class="op">)</span> <span class="va">expr</span>
<span class="kw">while</span><span class="op">(</span><span class="va">cond</span><span class="op">)</span> <span class="va">expr</span>
<span class="kw">repeat</span> <span class="va">expr</span></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit">
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">i</span><span class="op">)</span>
<span class="op">}</span>
<span class="co">#&gt; [1] 1</span>
<span class="co">#&gt; [1] 2</span>
<span class="co">#&gt; [1] 3</span>
<span class="co">#&gt; [1] 4</span>
<span class="co">#&gt; [1] 5</span></pre></div>
</div>
<div id="循环的替代品-apply函数" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%BE%AA%E7%8E%AF%E7%9A%84%E6%9B%BF%E4%BB%A3%E5%93%81-apply%E5%87%BD%E6%95%B0" class="anchor"></a>循环的替代品-<code>*apply</code>函数</h2>
<div class="sourceCode" id="cb33"><pre class="downlit">

<span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">18</span><span class="op">)</span>, <span class="fl">3</span>, <span class="fl">6</span><span class="op">)</span>
<span class="va">A</span>
<span class="co">#&gt;            [,1]       [,2]       [,3]       [,4]       [,5]       [,6]</span>
<span class="co">#&gt; [1,] 1.61983942 -1.2734657  1.5298122 -0.1219661  0.3349575 -0.3188670</span>
<span class="co">#&gt; [2,] 0.02556788 -0.1824574 -0.2530675  0.4686020 -1.8840924  0.3099761</span>
<span class="co">#&gt; [3,] 1.97458316  1.2555045  0.3959899  0.2223678  0.7081877  0.2124445</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">A</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">A</span><span class="op">[</span>, <span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>
<span class="co">#&gt; [1] 1.206663</span>
<span class="co">#&gt; [1] -0.06680618</span>
<span class="co">#&gt; [1] 0.5575782</span>
<span class="co">#&gt; [1] 0.1896679</span>
<span class="co">#&gt; [1] -0.2803157</span>
<span class="co">#&gt; [1] 0.06785122</span>

<span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">A</span>, <span class="fl">2</span>, <span class="va">mean</span><span class="op">)</span>
<span class="co">#&gt; [1]  1.20666349 -0.06680618  0.55757822  0.18966791 -0.28031574  0.06785122</span></pre></div>
<ul>
<li>用<code>??apply</code>查看所有apply函数</li>
</ul>
</div>
<div id="常用数学函数" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%B8%B8%E7%94%A8%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0" class="anchor"></a>常用数学函数</h2>
<div class="figure" style="text-align: center">
<img src="Figures/math_function.jpg" alt="数学函数" width="60%"><p class="caption">
数学函数
</p>
</div>
</div>
<div id="常用统计函数" class="section level2">
<h2 class="hasAnchor">
<a href="#%E5%B8%B8%E7%94%A8%E7%BB%9F%E8%AE%A1%E5%87%BD%E6%95%B0" class="anchor"></a>常用统计函数</h2>
<div class="figure" style="text-align: center">
<img src="Figures/stat_function.jpg" alt="统计函数" width="60%"><p class="caption">
统计函数
</p>
</div>
</div>
</div>
<div id="数据挖掘" class="section level1">
<h1 class="hasAnchor">
<a href="#%E6%95%B0%E6%8D%AE%E6%8C%96%E6%8E%98" class="anchor"></a>数据挖掘</h1>
<div id="简单数据探索" class="section level2">
<h2 class="hasAnchor">
<a href="#%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E6%8E%A2%E7%B4%A2" class="anchor"></a>简单数据探索</h2>
<div class="sourceCode" id="cb34"><pre class="downlit">
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">x</span>, main <span class="op">=</span> <span class="st">'Box plot'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">20</span>, col <span class="op">=</span> <span class="st">'blue'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/qqnorm.html">qqnorm</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></pre></div>
<pre><code>#&gt;     Min.  1st Qu.   Median     Mean  3rd Qu.     Max. 
#&gt; -2.14584 -0.76315 -0.01751 -0.07299  0.43626  2.28173</code></pre>
<p><img src="R_Basics_files/figure-html/unnamed-chunk-37-1.png" width="32%"><img src="R_Basics_files/figure-html/unnamed-chunk-37-2.png" width="32%"><img src="R_Basics_files/figure-html/unnamed-chunk-37-3.png" width="32%"></p>
</div>
<div id="简单的统计分析" class="section level2">
<h2 class="hasAnchor">
<a href="#%E7%AE%80%E5%8D%95%E7%9A%84%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90" class="anchor"></a>简单的统计分析</h2>
<div class="sourceCode" id="cb36"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://r-datatable.com">data.table</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span>
<span class="va">random_dt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html">data.table</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>,
                        group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'ctrl'</span>, <span class="st">'case'</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/t.test.html">t.test</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">~</span> <span class="va">group</span>, <span class="va">random_dt</span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Welch Two Sample t-test</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; data:  weight by group</span>
<span class="co">#&gt; t = 6.5335, df = 17.979, p-value = 3.873e-06</span>
<span class="co">#&gt; alternative hypothesis: true difference in means is not equal to 0</span>
<span class="co">#&gt; 95 percent confidence interval:</span>
<span class="co">#&gt;  1.640945 3.196655</span>
<span class="co">#&gt; sample estimates:</span>
<span class="co">#&gt; mean in group case mean in group ctrl </span>
<span class="co">#&gt;             2.2860            -0.1328</span></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Hongxiang Fan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
